name: Build youtube video downloaderi

on:
  schedule:
    # Runs at 6:20 PM UTC (9:20 PM EAT)
    - cron: '20 18 * * *'
    # Runs at 6:25 PM UTC (9:25 PM EAT)
    - cron: '25 18 * * *'
    # Runs at 6:30 PM UTC (9:30 PM EAT)
    - cron: '30 18 * * *'
    # Runs at 6:35 PM UTC (9:35 PM EAT)
    - cron: '35 18 * * *'
    # Runs at 6:40 PM UTC (9:40 PM EAT)
    - cron: '40 18 * * *'
    # Runs at 6:45 PM UTC (9:45 PM EAT)
    - cron: '45 18 * * *'
    # Runs at 6:50 PM UTC (9:50 PM EAT)
    - cron: '50 18 * * *'
    # Runs at 6:55 PM UTC (9:55 PM EAT)
    - cron: '55 18 * * *'
    # Runs at 7:00 PM UTC (10:00 PM EAT)
    - cron: '0 19 * * *'
  push:
    branch: Master

jobs:
  Download-vid:
    runs-on: ubuntu-latest
    steps:
      # Check out the repository
      - uses: actions/checkout@v3
      
      # Set up Python
      - uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # Install ffmpeg
      - name: Install ffmpeg
        uses: AnimMouse/setup-ffmpeg@v1

      # Uncomment this line if you need to make a script executable
      # - run: chmod +x YoutubeVideoDownloader.sh

      # Sample script execution and GitHub release creation
      - name: videos
        run: |
          cd test
          bash foo.sh  # Make sure foo.sh exists in the 'test' directory and is executable
          gh release create "${{ github.run_number }}.0.0" vid/*.jpg
        env:
          GITHUB_TOKEN: ${{ secrets.TK }}
        shell: bash
